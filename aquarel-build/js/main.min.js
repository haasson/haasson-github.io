"use strict";function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n,o,r,i,c){try{var s=e[i](c),a=s.value}catch(e){return void n(e)}s.done?t(a):Promise.resolve(a).then(o,r)}function c(){jQuery(".scrollbar-outer").scrollbar({ignoreMobile:!0})}window.onload=function(){function o(e){var t=this.closest(".form__line").querySelector(".form__icon_arrow");"open"===e?t.classList.add("form__icon_arrow-flip"):t.classList.remove("form__icon_arrow-flip")}function e(){t=991<document.documentElement.clientWidth?4:576<document.documentElement.clientWidth?3:2;for(var e=0;e<n.length;e++)e<t?n[e].classList.remove("team__item_hidden"):n[e].classList.add("team__item_hidden")}var t,n,r;new Swiper(".slider__body",{slidesPerView:"auto",scrollbar:{el:".slider__progress",draggable:!0,hide:!1},freeMode:!0}),new Swiper(".slider__main",{virtualTranslate:!1,slidesPerView:"auto",freeMode:!0,breakpoints:{992:{virtualTranslate:!0,watchOverflow:!1}}}),$(".select").select2({minimumResultsForSearch:1/0,placeholder:"choose",containerCssClass:"custom-select",dropdownCssClass:"custom-dropdown"}),document.querySelector(".form__body").classList.add("form__body_visible"),$(".select").on("select2:opening",function(){var s,t=(s=regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.call(this,"open"),n=new Promise(function(n,e){setTimeout(function(){var e=document.querySelector(".select2-results__options"),t=document.querySelector(".select2-container--default .select2-results > .select2-results__options");n(t.style.overflowY="auto",e.classList.add("scrollbar-outer"),c())},50)}),e.next=4,n;case 4:case"end":return e.stop()}},e,this)}),function(){var e=this,c=arguments;return new Promise(function(t,n){var o=s.apply(e,c);function r(e){a(o,t,n,r,i,"next",e)}function i(e){a(o,t,n,r,i,"throw",e)}r(void 0)})});return function(e){return t.apply(this,arguments)}}()),$(".select").on("select2:closing",function(e){o.call(this,"close")}),document.querySelectorAll(".select2-container").forEach(function(t){t.addEventListener("click",function(){var e,o=[];t.closest(".form__line").querySelectorAll("option[value]").forEach(function(e){var t=e.getAttribute("data-price");o.push(t)}),(e=document.querySelector(".select2-results"))&&e.querySelectorAll(".select2-results__option").forEach(function(e,t){var n=o[t];e.setAttribute("data-price",n)})})}),$(".popup-link").magnificPopup({type:"inline",preloader:!0,removalDelay:200,mainClass:"custom-mfp",showCloseBtn:!1,fixedContentPos:!0,fixedBgPos:!0,callbacks:{open:function(){$(".p-close").on("click",function(e){e.preventDefault(),$.magnificPopup.close()}),document.querySelector(this.currItem.src).addEventListener("click",function(e){e.target.classList.contains("popup__outer")&&$.magnificPopup.close()})}}}),c(),ymaps.ready(function(){var e=new ymaps.Map("map",{center:[55.776725,37.52928],zoom:15.8,behaviors:["drag"],controls:[],autoFitToViewport:"always"});document.documentElement.clientWidth<992&&(e.behaviors.disable("drag"),e.behaviors.enable("multiTouch"),e.setCenter([55.776816,37.52863])),document.documentElement.clientWidth<767&&e.setCenter([55.773692,37.534451]);var t=new ymaps.Placemark([55.776902,37.533894],{hintContent:'Салон красоты "Акварель"'},{iconLayout:"default#image",iconImageHref:"svg/single/location.svg",iconImageSize:[36,43],iconImageOffset:[-17,-50]});e.geoObjects.add(t)}),n=document.querySelector(".team__list").querySelectorAll(".team__item"),r=document.querySelector(".team__btn"),e(),window.addEventListener("resize",e),r.addEventListener("click",function(){n.forEach(function(e){return e.classList.remove("team__item_hidden")}),r.style.display="none"}),991<document.documentElement.clientWidth&&function(){var n,e=document.querySelectorAll("[data-value]"),o=document.querySelector(".link__inner");e.forEach(function(e){return e.addEventListener("mousemove",i)});var t=document.querySelector(".link-wrapper"),r=document.querySelector(".link");function i(e){var t=e.target.closest("[data-value]").getAttribute("data-value");t!==n&&(o.classList.remove("link__inner_active"),o.innerHTML="",n=t,setTimeout(function(){o.classList.add("link__inner_active"),o.innerHTML=n},100))}function c(e){r.style.transform="scale(".concat(e,")"),0===e&&(n="",o.innerHTML="")}document.addEventListener("mousemove",function(e){e.clientY,t.style.left="".concat(e.clientX,"px"),t.style.top="".concat(e.clientY,"px")}),document.querySelectorAll(".hover").forEach(function(e){e.style.cursor="none",e.addEventListener("mouseenter",c.bind(null,1)),e.addEventListener("mouseleave",c.bind(null,0))}),document.querySelectorAll(".slider").forEach(function(e){e.addEventListener("mouseenter",function(){r.classList.add("link_drag")}),e.addEventListener("mouseleave",function(){r.classList.remove("link_drag")})})}(),function(){if(document.documentElement.clientWidth<768){var e=document.querySelector("#subheading-arc"),t=document.querySelector(".review__text svg");e.setAttribute("d","M 12 150 a 98 108 0 0 0 216 0"),t.setAttribute("viewBox","0 0 240 270")}}(),function(){for(var n=["#5380F8","#D5B5F3","#F8B93E"],e=["service-form","form","warrantly","instagram","team","hidden"],t=0;t<e.length;t++){document.querySelectorAll(".btn_".concat(e[t])).forEach(function(t){t.addEventListener("mouseover",function(){var e=n[Math.floor(Math.random()*n.length)];t.style.background=e}),t.addEventListener("mouseout",function(){t.style.background="black"})})}}(),$('[name="phone"]').mask("+7 (999) 999 9999",{autoclear:!1});var i={phone:{type:"tel"},name:{pattern:/^[а-яА-Я\s]{2,23}|[a-zA-Z\s]{2,30}$/,type:"text"}};new s({formID:"form",inputs:i}),new s({formID:"form-popup",inputs:i})},function(){{if("function"==typeof NodeList.prototype.forEach)return;NodeList.prototype.forEach=Array.prototype.forEach}}();var t,s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=document.querySelector("#".concat(e.formID)),this.submitBtn=form.querySelector('[type="submit"]'),this.inputs=e.inputs,this.inputsCount=form.querySelectorAll(".inp-validate").length,this.validInputs=new Map,this.run()}var e,n,o;return e=t,(n=[{key:"run",value:function(){this.validate(),this.submit()}},{key:"validate",value:function(){function e(e){var n=o.inputs[e];o.form.querySelectorAll(".inp-validate input[type=".concat(n.type,"]")).forEach(function(e){var t=e.closest(".form__line");e.addEventListener("focus",function(){t.classList.remove("inp-error")}),"tel"===n.type?e.addEventListener("keyup",function(){-1===e.value.indexOf("_")?o.setInputOk(t):o.setInputError(t)}):"text"===n.type&&e.addEventListener("keyup",function(){e.value.match(n.pattern)?o.setInputOk(t):o.setInputError(t)})})}var o=this;for(var t in this.inputs)e(t)}},{key:"setInputOk",value:function(e){e.classList.add("inp-ok"),this.validInputs.set(e,null),this.checkValidInputsCount()}},{key:"setInputError",value:function(e){e.classList.remove("inp-ok"),this.validInputs.delete(e,null),this.checkValidInputsCount()}},{key:"checkValidInputsCount",value:function(){this.inputsCount==this.validInputs.size?this.submitBtn.classList.add("form-valid"):this.submitBtn.classList.remove("form-valid")}},{key:"submit",value:function(){var t=this;this.form.addEventListener("submit",function(e){(e.preventDefault(),t.submitBtn.classList.contains("form-valid"))?t.sendForm():t.form.querySelectorAll(".inp-validate").forEach(function(e){e.classList.contains("inp-ok")||e.classList.add("inp-error")})})}},{key:"openPopup",value:function(){console.log("open"),$.magnificPopup.open({type:"inline",mainClass:"custom-mfp custom-mfp-form",items:{src:"#".concat(this.route)},preloader:!0,showCloseBtn:!1,fixedContentPos:!0,fixedBgPos:!0,callbacks:{open:function(){$(".p-close").on("click",function(e){e.preventDefault(),$.magnificPopup.close()}),document.querySelector(this.currItem.src).addEventListener("click",function(e){e.target.classList.contains("popup__outer")&&$.magnificPopup.close()})}}},0)}},{key:"sendForm",value:function(){var e=this;this.route=this.form.getAttribute("data-route");var t=this.form.querySelector('input[name="name"]');document.querySelector("#".concat(this.route)).querySelector(".client-name").innerHTML=t.value+",",$.ajax({url:"send.php",method:"POST",data:decodeURI($(this.form).serialize()),success:function(e){console.log("success"),console.log(e),$("form").find("select").val(""),$("form").find("select").trigger("change"),$("form").find("input").val("")},error:function(e){alert("error - "+e.status)},complete:function(){console.log("complete"),console.log(this.data)}}),$.magnificPopup.close(),setTimeout(function(){e.openPopup()},210)}}])&&r(e.prototype,n),o&&r(e,o),t}();function e(e){t.find(".select_service").val(e),t.find(".select_service").trigger("change")}Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(this))return null;do{if(t.matches(e))return t;t=t.parentElement}while(null!==t);return null}),document.querySelectorAll(".select_date").forEach(function(e){for(var t=new Date,n=0;n<=14;n++){var o,r=t.getMonth(),i=t.getDate();i+=[" января"," февраля"," марта"," апреля"," мая"," июня"," июля"," августа"," сентября"," октября"," ноября"," декабря"][r],t.setDate(t.getDate()+1),o=i;var c=document.createElement("option");c.appendChild(document.createTextNode(o)),c.setAttribute("value",o),c.setAttribute("name","data"),c.setAttribute("data-price",""),e.appendChild(c)}}),document.querySelectorAll('.hover[data-href^="j-"]').forEach(function(e){e.addEventListener("click",function(e){if(!e.target.closest("a")){var t=e.target.closest(".hover").getAttribute("data-href").replace("j-","#");jQuery.magnificPopup.open({items:{src:t},type:"inline",mainClass:"custom-mfp custom-mfp-form",removalDelay:200,preloader:!0,showCloseBtn:!1,fixedContentPos:!0,fixedBgPos:!0,callbacks:{open:function(){$(".p-close").on("click",function(e){e.preventDefault(),$.magnificPopup.close()}),document.querySelector(this.currItem.src).addEventListener("click",function(e){e.target.classList.contains("popup__outer")&&$.magnificPopup.close()})}}},0)}})}),$(".go-down").on("click",function(e){$("html,body").stop().animate({scrollTop:$(this.hash).offset().top},1e3),e.preventDefault()}),t=$("#form-popup"),$(".service-item").on("click",function(){e($(this).attr("data-option"))}),$(".complex-item").on("click",function(){e($(this).attr("data-option"))}),$(".btn_warrantly").on("click",function(){e("Женская стрижка")}),$(".popup__outer").on("click",function(){e("")});